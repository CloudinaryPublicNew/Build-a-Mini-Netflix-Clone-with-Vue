# Play a Video

Now add the JavaScript logic for playing trailers. The almost- stateless component receives properties (`props`) from the parent (`App`) component.


## Add the Properties

Under the `script` tag, add the following:

```js
export default {
  props: ['cloudinaryInstance', 'movie'],
}
```

`cloudinaryInstance` is an instance of the Cloudinary SDK, which you later initialize in the parent component and pass down as `props` to `VuePlayer` component. Subsequently, you can, with that instance, create a video player, add the source to the `video` tag in the preceding section, and activate the play/pause feature.

The `movie` property, which is the player payload, is a single item from the array of movies in the database. Each item contains a title and a trailer video for rendering.


## Add Video Features

Add a `mounted` lifecycle method to the Vue object with the following:

```js
mounted() {
  this.player = this.cloudinaryInstance.videoPlayer('trailer', {
    transformation: {
        crop: 'crop',
        width: 1200,
        aspect_ratio: '16:9',
        x: 100,
        y: 100,
        gravity: 'center'
      }
  });
  this.player.source(
    this.movie.trailer || 'Marvel_Studios_Black_Panther_-_Official_Trailer_nmrtr7'
  );
  // Mute on blur
  document.hidden && this.player.mute()
  window.onfocus = () => this.player.unmute()
  window.onblur = () => this.player.mute()
},
```

`this.player` is passed the `videoPlayer` result, which then creates a player on the `video` tag. The first parameter passed to `videoPlayer` must match the ID on the `video` tag. The second parameter is an object that holds the details of the video configurations and the transformation you would like to apply to the video.

After creating the player, try changing its behavior by means of methods. For example:

* You can add a `source` method that  matches the public ID on your Cloudinary server. The source can come from the `movie` property or default to the Black Panther trailer.

* Because the video plays by default and loops when it ends, it  becomes distracting if you are not watching, that is, not on the Play tab. As a solution, check if the document is hidden and, if so, mute the player. 

* Add two events, `onfocus` and `onblur`, to check if the Play tab is active or otherwise. Accordingly, unmute or mute, respectively.

> *MS: Please verify if the last bullet above is correct.


## Change the Current Trailer

In the next section, we are going to build a list of movies component. In that list, we should be able to select a movie and the trailer player switches to that movie and starts playing it. How do we know when the movie is selected? We can watch the movie prop that is passed down and do something when we realize the value has been changed by the parent.

Add the following in the object:

```js
watch: {
  movie(newMovie, oldMovie) {
    this.player.source(newMovie.trailer);
  }
},
```

The name of the method (`movie`) in the `watch` object must match the prop you intend to watch. When the value change, we can then call the `source` method to update the player.


## Importing to `App`

The component is useless unless mounted in its parent component. Head to `App.vue` and import the component in its script:

```js
import VideoPlayer from './components/VideoPlayer.vue';
export default {
  components: {
    VideoPlayer
  }
};
```

Itâ€™s also mandatory to tell `App.vue` that the `VidePlayer` component is a child by adding it to the list of components object.

Next, render the component right below the navigation code:

```html
...
</nav>
<VideoPlayer :cloudinaryInstance="cloudinaryInstance" :movie="movie"></VideoPlayer>
```

The `cloudinaryInstance` and `movie` is passed down to the component through the `VideoPlayer` element above. None of this exists yet but we will create them in the next section.